<!DOCTYPE html>
<html lang="pt" xmlns:th="http://www.thymeleaf.org">
<head th:replace="fragments/layout :: head('FastDev - Login/Cadastro')"></head>
<body style="background-color:var(--bg);color:var(--text);line-height:1.6;margin:0;padding:20px 0 80px 0;min-height:calc(100vh - 100px);display:flex;justify-content:center;align-items:flex-start;">
  <div class="auth-container" style="background-color:var(--panel);padding:40px;border-radius:15px;width:100%;max-width:400px;box-shadow:0 10px 20px rgba(0,0,0,.5);margin-top:20px;">
    
    <div class="logo" style="font-size:28px;font-weight:bold;letter-spacing:1px;color:var(--text);text-align:center;margin-bottom:30px;">
      FAST<span style="color:var(--brand);">D</span>EV
    </div>

    <!-- Mensagens globais -->
    <div th:if="${successMessage}" th:text="${successMessage}" style="background:#1d3b24;color:#caffd2;padding:10px;border-radius:6px;margin-bottom:12px;"></div>
    <div th:if="${errorMessage}" th:text="${errorMessage}" style="background:#3b1d1d;color:#ffcaca;padding:10px;border-radius:6px;margin-bottom:12px;"></div>

    <div class="tabs" style="display:flex;justify-content:space-around;margin-bottom:30px;">
      <div id="tab-login" class="tab active" style="flex:1;text-align:center;padding:10px 0;font-size:18px;color:var(--text-secondary);cursor:pointer;border-bottom:2px solid var(--brand);">Login</div>
      <div id="tab-register" class="tab" style="flex:1;text-align:center;padding:10px 0;font-size:18px;color:var(--text-secondary);cursor:pointer;border-bottom:2px solid transparent;">Cadastro</div>
    </div>

    <!-- Login -->
    <div id="login" class="form-container active">
      <form th:action="@{/auth-web/login}" th:object="${loginDTO}" method="post">
        <div class="form-group" style="margin-bottom:20px;">
          <label>Login</label>
          <input type="text" th:field="*{login}" class="form-input" placeholder="Digite seu login" required
                 th:classappend="${#fields.hasErrors('login')} ? ' input-error' : ''"/>
          <div th:if="${#fields.hasErrors('login')}" th:errors="*{login}" class="error-msg"></div>
        </div>

        <div class="form-group" style="margin-bottom:20px;">
          <label>Senha</label>
          <input type="password" th:field="*{password}" class="form-input" placeholder="Digite sua senha" required
                 th:classappend="${#fields.hasErrors('password')} ? ' input-error' : ''"/>
          <div th:if="${#fields.hasErrors('password')}" th:errors="*{password}" class="error-msg"></div>
        </div>

        <button type="submit" class="btn">Entrar</button>
      </form>
    </div>

    <!-- Cadastro -->
    <div id="register" class="form-container" style="display:none;">
      <form th:action="@{/auth-web/register}" th:object="${registerDTO}" method="post">
        <div class="form-group" style="margin-bottom:20px;">
          <label>Nome *</label>
          <input type="text" th:field="*{nome}" class="form-input" placeholder="Digite seu nome" required
                 th:classappend="${#fields.hasErrors('nome')} ? ' input-error' : ''"/>
          <div th:if="${#fields.hasErrors('nome')}" th:errors="*{nome}" class="error-msg"></div>
        </div>

        <div class="form-group" style="margin-bottom:20px;">
          <label>Email *</label>
          <input type="text" th:field="*{login}" class="form-input" placeholder="Seu login" required
                 th:classappend="${#fields.hasErrors('login')} ? ' input-error' : ''"/>
          <div th:if="${#fields.hasErrors('login')}" th:errors="*{login}" class="error-msg"></div>
        </div>

        <div class="form-group" style="margin-bottom:20px;">
          <label>Senha *</label>
          <input type="password" th:field="*{password}" class="form-input" placeholder="Crie uma senha" required
                 th:classappend="${#fields.hasErrors('password')} ? ' input-error' : ''"/>
          <div th:if="${#fields.hasErrors('password')}" th:errors="*{password}" class="error-msg"></div>
        </div>

        <div class="form-group" style="margin-bottom:20px;">
          <label>Nome completo *</label>
          <input type="text" th:field="*{nomeCompleto}" class="form-input" placeholder="Nome completo" required
                 th:classappend="${#fields.hasErrors('nomeCompleto')} ? ' input-error' : ''"/>
          <div th:if="${#fields.hasErrors('nomeCompleto')}" th:errors="*{nomeCompleto}" class="error-msg"></div>
        </div>

        <div class="form-group" style="margin-bottom:20px;">
          <label>Telefone *</label>
          <input type="text" th:field="*{telefone}" class="form-input" placeholder="(11) 99999-9999" required
                 th:classappend="${#fields.hasErrors('telefone')} ? ' input-error' : ''"/>
          <div th:if="${#fields.hasErrors('telefone')}" th:errors="*{telefone}" class="error-msg"></div>
        </div>

        <button type="submit" class="btn">Cadastrar</button>
      </form>
    </div>
  </div>

  <footer style="text-align:center;padding:20px;background:var(--panel-2);position:fixed;bottom:0;width:100%;font-size:14px;color:var(--text-secondary);box-shadow:0 -2px 10px rgba(0,0,0,0.3);z-index:1000;">
    <p style="margin:0;">FastDev Â© 2025 - Todos os direitos reservados</p>
  </footer>

  <style>
    .form-input {
      width: 100%;
      padding: 12px;
      border-radius: 5px;
      border: 2px solid var(--line);
      background-color: var(--panel-2);
      color: var(--text);
      font-size: 16px;
      outline: none;
      transition: background .3s, border-color .3s;
    }

    .form-input:focus {
      border-color: var(--brand) !important;
      background-color: var(--panel-3) !important;
    }

    .btn {
      display: block;
      width: 100%;
      background: var(--brand);
      color: var(--text);
      padding: 12px;
      border: none;
      border-radius: 5px;
      font-weight: bold;
      font-size: 16px;
      cursor: pointer;
      transition: background .3s, transform .2s;
    }

    .btn:hover {
      background: var(--brand-hover) !important;
      transform: translateY(-1px) !important;
    }

    .tab:hover {
      color: var(--text) !important;
    }

    .form-container input.input-error {
      border-color: #ff4444 !important;
    }

    .error-msg {
      color: #ff4444;
      font-size: 12px;
      margin-top: 5px;
    }
  </style>

  <script>
    const tabLogin = document.getElementById('tab-login');
    const tabRegister = document.getElementById('tab-register');
    const loginBox = document.getElementById('login');
    const registerBox = document.getElementById('register');

    tabLogin.addEventListener('click', () => {
      loginBox.style.display = 'block';
      registerBox.style.display = 'none';
      tabLogin.style.borderBottom = '2px solid var(--brand)';
      tabRegister.style.borderBottom = '2px solid transparent';
    });

    tabRegister.addEventListener('click', () => {
      loginBox.style.display = 'none';
      registerBox.style.display = 'block';
      tabRegister.style.borderBottom = '2px solid var(--brand)';
      tabLogin.style.borderBottom = '2px solid transparent';
    });
  </script>
</body>
</html>
